cd # Skill: request-approval

**Name**: request-approval

**Description**: Creates approval requests for sensitive actions requiring human review

**Version**: 1.0

## Purpose
This skill creates approval requests for sensitive actions that require human review, following the human-in-the-loop pattern for security and governance.

## Behavior
1. Identify when approval is needed:
   - Any email send action
   - Any payment or financial transaction
   - Social media posts
   - File deletions
   - Actions over defined thresholds
   - Any action flagged as "sensitive" in Company_Handbook.md

2. Create detailed approval request file in /Pending_Approval/

3. Include all necessary information for human to make decision:
   - What action will be taken
   - Why it's needed
   - What the impact will be
   - Risk level assessment
   - Expiration time

4. Monitor for approval decision:
   - Check if file moved to /Approved or /Rejected
   - Respect expiration timeouts
   - Log all approval decisions

## Approval Request Format
```markdown
---
action_type: [email_send/payment/social_post/file_delete/other]
action_id: [unique identifier]
priority: [high/medium/low]
risk_level: [high/medium/low]
created: [ISO timestamp]
expires: [ISO timestamp, typically 24-48 hours]
status: pending_approval
auto_approve: false
---

# üîê Approval Required: [Action Title]

## Action Summary
[1-2 sentence clear description]

## Details

**Type:** [Action type]
**Requested by:** AI Employee
**Reason:** [Why this action is needed]
**Impact:** [What will happen]
**Risk:** [Potential issues if any]

## Specifics

### [For Email:]
- **To:** [recipient]
- **Subject:** [subject line]
- **Content:** See draft below

### [For Payment:]
- **Amount:** [amount]
- **To:** [recipient/account]
- **Purpose:** [invoice/bill/etc]
- **Account:** [which account to use]

### [For Social Post:]
- **Platform:** [LinkedIn/Twitter/etc]
- **Content:** See draft below
- **Scheduled:** [when to post]

## Draft/Details
```
[Full content of email/post/transaction details]
```

## Approval Instructions
‚úÖ To Approve:
Move this file to /Approved folder
‚ùå To Reject:
Move this file to /Rejected folder
‚úèÔ∏è To Modify:
Edit the content above, then move to /Approved

## Expiration
This approval request will expire on: [date/time]
After expiration, action will be automatically cancelled.

## Notes
[Any additional context or considerations]

---
*Approval request generated by AI Employee*
```

## Approval Thresholds (from Company_Handbook.md)
Never auto-approve:
- New email recipients
- Payments over Rs. 500
- First-time social posts
- Any file deletion
- Database modifications

May auto-approve (if rules allow):
- Reply emails to known contacts
- Recurring payments under Rs. 100
- Scheduled posts (pre-approved templates)
- Archive actions (not delete)

## Trigger Conditions
This skill should be invoked automatically when:
- Another skill wants to send an email
- Payment action is detected
- Social media post is drafted
- Sensitive file operation requested

## Monitoring Logic
1. Create approval file in /Pending_Approval
2. Wait for human decision
3. Check every 5 minutes if file moved
4. If moved to /Approved:
   - Execute the approved action
   - Log approval decision
   - Move to /Done
5. If moved to /Rejected:
   - Cancel action
   - Log rejection
   - Move to /Done
6. If expired (timeout reached):
   - Auto-reject
   - Log timeout
   - Move to /Done

## Expiration Times (default)
- Email sends: 48 hours
- Payments: 24 hours
- Social posts: 72 hours
- File operations: 24 hours
- Other: 48 hours

## Error Handling
- If approval file corrupted, reject action
- If folders don't exist, create them
- If timeout, always err on side of caution (reject)
- If user edits approved content, validate before executing

## Security Rules
- Always log approval chain (who, what, when)
- Never execute if any doubt about approval validity
- Require explicit approval (not implicit)
- Timeout = Reject (never auto-approve on timeout)
- Maintain audit trail in /Logs

## Response After Creating Approval Request
üîê Approval Required
I've created an approval request for:
[Action title]
üìÅ Location: /Pending_Approval/APPROVAL_[id].md
‚è±Ô∏è  Expires: [relative time, e.g., "in 24 hours"]
üéØ Priority: [priority level]
To approve: Move the file to /Approved folder
To reject: Move the file to /Rejected folder
I'll monitor for your decision and execute if approved.

## Implementation Notes
The skill should use file system tools to create approval files, monitor for changes, and execute actions based on human decisions. It should properly parse Company_Handbook.md to determine when approval is required and implement appropriate timeout mechanisms.